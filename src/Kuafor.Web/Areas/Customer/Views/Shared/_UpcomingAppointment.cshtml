@model Kuafor.Web.Models.UpcomingAppointmentVm
@using System.Globalization

<div class="card border-0 shadow-sm">
    <div class="card-body d-flex flex-column flex-md-row aling-items-start align-items-md-center gap-3">
        <div class="flex-grow-1">
            @* TODO: Backend ile gerçek durum kontrolü *@
            <h5 class="card-title mb-1">Yaklaşan Randevun</h5>
            @if (Model?.HasAppointment == true && Model.StartTime.HasValue)
            {
                var dt = Model.StartTime.Value;
                <div>
                    <strong>@dt.ToString("dd MMM dddd, HH:mm", CultureInfo.GetCultureInfo("tr-TR"))</strong>
                    · @Model.ServiceName · <em>@Model.StylistName</em> (Şube: @Model.Branch)
                </div>
                <div class="text-muted small mt-1">
                    Kalan Süre: <span id="up-next-countdown" data-start="@dt.ToString("o")">—</span>
                </div>
            }
            else
            {
                <div class="text-muted">Şu an için yaklaşan bir randevun görünmüyor.</div>
            }
        </div>
        <div class="d-flex gap-2">
            @if (Model?.HasAppointment == true && Model.AppointmentId.HasValue)
            {
                <a asp-area="Customer" asp-controller="Appointments" asp-action="Details" asp-route-id="@Model.AppointmentId" class="btn btn-outline-secondary">Detay</a>
                <a asp-area="Customer" asp-controller="Appointments" asp-action="Reschedule" asp-route-id="@Model.AppointmentId" class="btn btn-outline-primary">Tarihi Değiştir</a>
            }
            <a asp-area="Customer" asp-controller="Appointments" asp-action="New" class="btn btn-primary btn-lg">Randevu Al</a>
            <a asp-area="Customer" asp-controller="Appointments" asp-action="Index" class="btn btn-outline-secondary btn-lg">Randevularım</a>
        </div>
    </div>
</div>