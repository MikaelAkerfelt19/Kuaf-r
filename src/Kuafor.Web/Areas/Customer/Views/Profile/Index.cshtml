@model Kuafor.Web.Models.Profile.ProfilePageViewModel
@{
    ViewData["Title"] = "Profile";
}
<div class="container py-4">
    <h3 class="mb-3">Profil</h3>
    
    @if (ViewBag.NextAppointment != null)
    {
        var appointment = ViewBag.NextAppointment as Kuafor.Web.Models.Entities.Appointment;
        if (appointment != null)
        {
            <div class="alert alert-info mb-4">
                <h5 class="alert-heading">Yaklaşan Randevunuz</h5>
                <p class="mb-2">
                    <strong>@appointment.StartAt.ToString("dd MMM yyyy, dddd, HH:mm")</strong><br>
                    @(appointment.Service?.Name ?? "Hizmet") · @(appointment.Stylist?.FirstName ?? "") @(appointment.Stylist?.LastName ?? "")
                    @if (appointment.Branch != null)
                    {
                        <span>(Şube: @appointment.Branch.Name)</span>
                    }
                </p>
                <hr>
                <p class="mb-0">
                    <a href="@Url.Action("Details", "Appointments", new { area = "Customer", id = appointment.Id })" class="btn btn-sm btn-primary">Detayları Gör</a>
                    <a href="@Url.Action("Reschedule", "Appointments", new { area = "Customer", id = appointment.Id })" class="btn btn-sm btn-outline-secondary">Tarihi Değiştir</a>
                </p>
            </div>
        }
    }
    
    <ul class="nav nav-tabs" role="tablist">
        <li class="nav-item" role="presentation"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#tab-identity" type="button" role="tab">Kimlik & İletişim</button></li>
        <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-addresses" type="button" role="tab">Adresler</button></li>
        <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-notifications" type="button" role="tab">Bildirimler</button></li>
        <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-preferences" type="button" role="tab">Tercihler</button></li>
        <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-loyalty" type="button" role="tab">Sadakat & Kuponlar</button></li>
        <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-messages" type="button" role="tab">Mesajlarım</button></li>
        <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-security" type="button" role="tab">Güvenlik</button></li>
        <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-payments" type="button" role="tab">Ödemeler</button></li>
        <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-privacy" type="button" role="tab">Gizlilik / KVKK</button></li>
    </ul>

    <div class="tab-content pt-3">
        <div class="tab-pane fade show active" id="tab-identity" role="tabpanel">
            <partial name="Partials/_Profile.Identity" model="Model.Identity" />
        </div>
        <div class="tab-pane fade" id="tab-addresses" role="tabpanel">
            <partial name="Partials/_Profile.Addresses" model="Model.Addresses" />
        </div>
        <div class="tab-pane fade" id="tab-notifications" role="tabpanel">
            <partial name="Partials/_Profile.Notifications" model="Model.Notifications" />
        </div>
        <div class="tab-pane fade" id="tab-preferences" role="tabpanel">
            <partial name="Partials/_Profile.Preferences" model="Model.Preferences" />
        </div>
        <div class="tab-pane fade" id="tab-loyalty" role="tabpanel">
            <partial name="Partials/_Profile.Loyalty" model="Model.Loyalty" />
            <div class="my-3"></div>
            <partial name="Partials/_Profile.Coupons" model="Model.Coupons" />
        </div>
        <div class="tab-pane fade" id="tab-messages" role="tabpanel">
            <partial name="Partials/_Profile.Messages" model="Model.Messages" />
        </div>
        <div class="tab-pane fade" id="tab-security" role="tabpanel">
            <partial name="Partials/_Profile.Security" model="Model.Security" />
        </div>
        <div class="tab-pane fade" id="tab-payments" role="tabpanel">
            <partial name="Partials/_Profile.Payments" model="Model.Payments" />
        </div>
        <div class="tab-pane fade" id="tab-privacy" role="tabpanel">
            <partial name="Partials/_Profile.Privacy" model="Model.Privacy" />
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/profile-identity.js"></script>
    <script src="~/js/profile-addresses.js"></script>
    <script src="~/js/profile-notifications.js"></script>
    <script src="~/js/profile-preferences.js"></script>
    <script src="~/js/profile-loyalty.js"></script>
    <script src="~/js/profile-coupons.js"></script>
    <script src="~/js/profile-security.js"></script>
    <script src="~/js/profile-payments.js"></script>
    <script src="~/js/profile-privacy.js"></script>
}